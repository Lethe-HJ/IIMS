(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"2c1e":function(e,t,s){"use strict";var i=s("3bbd"),r=s.n(i);r.a},"3bbd":function(e,t,s){},"7bc1":function(e,t,s){"use strict";var i=s("22e9"),r=s("a013"),a=s("0d5f"),n=s("b0f4"),o=s("b146"),l=s("35dd"),u=s("1f98"),c=s("b6f1"),d=Math.min,h=[].push,p="split",m="length",f="lastIndex",v=4294967295,g=!c(function(){RegExp(v,"y")});s("629c")("split",2,function(e,t,s,c){var w;return w="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[m]||2!="ab"[p](/(?:ab)*/)[m]||4!="."[p](/(.?)(.?)/)[m]||"."[p](/()()/)[m]>1||""[p](/.?/)[m]?function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!i(e))return s.call(r,e,t);var a,n,o,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=void 0===t?v:t>>>0,g=new RegExp(e.source,c+"g");while(a=u.call(g,r)){if(n=g[f],n>d&&(l.push(r.slice(d,a.index)),a[m]>1&&a.index<r[m]&&h.apply(l,a.slice(1)),o=a[0][m],d=n,l[m]>=p))break;g[f]===a.index&&g[f]++}return d===r[m]?!o&&g.test("")||l.push(""):l.push(r.slice(d)),l[m]>p?l.slice(0,p):l}:"0"[p](void 0,0)[m]?function(e,t){return void 0===e&&0===t?[]:s.call(this,e,t)}:s,[function(s,i){var r=e(this),a=void 0==s?void 0:s[t];return void 0!==a?a.call(s,r,i):w.call(String(r),s,i)},function(e,t){var i=c(w,e,this,t,w!==s);if(i.done)return i.value;var u=r(e),h=String(this),p=a(u,RegExp),m=u.unicode,f=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),b=new p(g?u:"^(?:"+u.source+")",f),k=void 0===t?v:t>>>0;if(0===k)return[];if(0===h.length)return null===l(b,h)?[h]:[];var x=0,C=0,$=[];while(C<h.length){b.lastIndex=g?C:0;var y,P=l(b,g?h:h.slice(C));if(null===P||(y=d(o(b.lastIndex+(g?0:C)),h.length))===x)C=n(h,C,m);else{if($.push(h.slice(x,C)),$.length===k)return $;for(var S=1;S<=P.length-1;S++)if($.push(P[S]),$.length===k)return $;C=x=y}}return $.push(h.slice(x)),$}]})},a55b:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("div",{staticClass:"top",staticStyle:{width:"100%"}},[s("div",{staticClass:"login-main"},[e._m(0),s("van-cell-group",[s("van-field",{attrs:{clearable:"",label:"用户名",placeholder:"请输入用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("van-field",{attrs:{clearable:"",type:"password",label:"密码",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("van-checkbox",{model:{value:e.rememberPassword,callback:function(t){e.rememberPassword=t},expression:"rememberPassword"}},[e._v("记住用户名和密码")]),s("van-button",{attrs:{type:"primary",size:"large"},on:{click:e.loginSubmit}},[e._v("登录")])],1)],1),s("router-view")],1)])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-title"},[s("span",[e._v("工作日报系统")])])}],a=(s("7bc1"),{name:"login",data:function(){return{error:[],username:"",password:"",rememberPassword:!0}},mounted:function(){this.getCookie()},methods:{validPassword:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},setCookie:function(e,t,s){var i=new Date;i.setTime(i.getTime()+864e5*s),document.cookie="userName="+e+";path=/;expires="+i.toLocaleString(),document.cookie="userPwd="+t+";path=/;expires="+i.toLocaleString()},getCookie:function(){if(document.cookie.length>0)for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var s=e[t].split("=");"userName"===s[0]?this.username=s[1]:"userPwd"===s[0]&&(this.password=s[1])}},loginSubmit:function(){var e=this;if(""===this.username)return this.$toast("用户名不能为空"),!1;if(""===this.password)return this.$toast("密码不能为空"),!1;!0===this.rememberPassword?this.setCookie(this.username,this.password,7):(this.$api.clearCookie("userName"),this.$api.clearCookie("userPwd"));var t=this.$md5(this.password).toLocaleUpperCase(),s={username:this.username,password:t};this.$api.post("/iims/staff/login",s).then(function(t){if(1===t.status){var s=new Date;s.setTime(s.getTime()+6048e5),document.cookie="token="+t.data[0].token+";path=/;expires="+s.toLocaleString(),localStorage.setItem("userInfo",JSON.stringify(t)),e.$router.push({path:"/work_daily"}),e.$myToast("登录成功","success","1500")}else 0===t.status?e.$myToast("用户名不存在","error","1500"):2===t.status&&e.$myToast("密码错误，请重试！","error","1500")}).catch(function(e){console.log(e)})}},watch:{rememberPassword:function(e){!0===e?this.setCookie(this.username,this.password,7):(this.$api.clearCookie("userName"),this.$api.clearCookie("userPwd"))}}}),n=a,o=(s("2c1e"),s("6691")),l=Object(o["a"])(n,i,r,!1,null,"cde9e7ee",null);t["default"]=l.exports}}]);
//# sourceMappingURL=login.b035ba2e.js.map